
<meta charset="utf-8">
{{/* NOTE: the Site's title, and if there is a page title, that is set too */}}
<title>{{ block "title" . }}{{ with .Params.Title }}{{ . }} | {{ end }}{{ .Site.Title }}{{ end }}</title>
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width,minimum-scale=1">
{{ .Hugo.Generator }}
{{/* NOTE: For Production make sure you add `HUGO_ENV="production"` before your build command */}}
{{ if eq (getenv "HUGO_ENV") "production" | or (eq .Site.Params.env "production")  }}
  <meta name="robots" content="index, follow">
{{ else }}
  <meta name="robots" content="noindex, nofollow">
{{ end }}

{{ if eq .Site.Params.CSP true }}
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' www.gravatar.com; {{ if ne (getenv "HUGO_ENV") "production" | and (ne .Site.Params.env "production") }}connect-src ws:;{{ end }} worker-src 'none'; frame-src www.youtube-nocookie.com; object-src 'none'">
{{ end }}

{{ block "favicon" . }}
  {{ $iconSVG := resources.Get "image/favicon.svg" | resources.Minify }} {{ $icon := resources.Get "image/favicon.png" }}
  <link rel="apple-touch-icon-precomposed" href="{{ ($icon.Resize " 180x180 ").RelPermalink }}" />
  <link rel="icon" type="image/svg" href="{{ $iconSVG.RelPermalink }}" />
  <link rel="icon" type="image/png" href="{{ ($icon.Resize " 196x196 ").RelPermalink }}" />
{{ end }}

{{ if .RSSLink }}
  <link href="{{ .RSSLink }}" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />
  <link href="{{ .RSSLink }}" rel="feed" type="application/rss+xml" title="{{ .Site.Title }}" />
{{ end }}

{{ block "social" . }}
  {{- partial "core/social.html" . -}}
{{end }}

{{/*  Begin CSS  */}}
{{ $sass := resources.Get "scss/main.scss" }}
{{ $cssOpts := cond (.Site.IsServer) (dict "enableSourceMap" true ) (dict "outputStyle" "compressed") }}
{{ if .Site.IsServer }}
{{ $syntax := resources.Get "css/syntax.css" }}
<link rel="stylesheet" href="{{ $syntax.Permalink | absURL }}" media="screen">
{{ $css := $sass | resources.ExecuteAsTemplate "main.scss" . | toCSS $cssOpts }}
<link rel="stylesheet" href="{{ $css.Permalink | absURL }}" media="screen">
{{ else }}
{{ $syntax := resources.Get "css/syntax.css" }}
{{ $main := $sass | resources.ExecuteAsTemplate "main.scss" . | toCSS $cssOpts }}
{{ $cssFiles := slice $main $syntax | resources.Concat "index.css"}}
{{ $css := $cssFiles | resources.Minify | resources.Fingerprint "sha512" }}

<link rel="stylesheet" href="{{ $css.Permalink }}" integrity="{{ $css.Data.Integrity }}" media="screen">
{{ end }}

{{ range .Site.Params.custom_css }}
<link rel="stylesheet" href="{{ $.Site.BaseURL }}{{ . }}">
{{ end }}
{{/*  End CSS  */}}


<!-- {{ if eq (getenv "HUGO_ENV") "production" | or (eq .Site.Params.env "production")  }}
  {{ template "_internal/google_analytics_async.html" . }}
{{ end }} -->

